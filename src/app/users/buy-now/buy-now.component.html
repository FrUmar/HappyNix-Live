<div class="modal-body">
    <div class="modal-header">
        <h2 data-text="Payment">Payment option</h2>
        <button class="close-button" (click)="closeBuyModal()">&times;</button>
    </div>

    <h3 class="payment-header mt-2">SELECT PAYMENT METHOD</h3>
    <div class="payment-method-selection">
        <div class="method-option" [class.selected]="paymentMethod === 'Card'" (click)="selectPaymentMethod('Card')">
            <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 64 64">
                <path fill="#0ff"
                    d="M60.333 22.575L41.421 3.66C40.367 2.605 38.968 2 37.582 2c-1.005 0-1.903.317-2.602.918L3.768 29.77a5 5 0 0 0-1.764 3.643c-.056 1.494.522 2.926 1.628 4.033l22.921 22.923C27.606 61.421 28.969 62 30.391 62a5.06 5.06 0 0 0 3.836-1.768l26.848-31.215c1.479-1.718 1.153-4.547-.742-6.442M3.821 33.481a3.2 3.2 0 0 1 1.132-2.333L36.167 4.297c.362-.313.852-.479 1.415-.479c.894 0 1.849.422 2.554 1.128l1.639 1.638L6.971 38.213l-2.053-2.054c-.745-.745-1.135-1.696-1.097-2.678m55.875-5.649L32.85 59.047a3.2 3.2 0 0 1-2.459 1.135c-.937 0-1.844-.391-2.554-1.1L15.034 46.277l33.441-32.99L59.048 23.86c1.204 1.205 1.496 2.988.648 3.972" />
                <path fill="#0ff"
                    d="M47.837 18.607L22.449 44.521l7.528 7.529l1.141-1.246c.764.174 1.655-.063 2.297-.719c.959-.981 1.538-2.388 1.9-3.871l19.172-20.956zm-.416 9.081c-.704.313-1.897.662-.74-.689l.779.605zm4.433-3.094c.01-.009.005-.021.011-.03l.736.736l-13.78 15.064c.541-1.106.945-2.254 1.336-3.417c.174-.522.623-.402.98-.762c.727-.734 1.429-1.481 2.137-2.211c.896-.922 1.204-2.145 2.029-3.072c.887-.994 1.738-1.564 2.302-2.679c1.658-.719 3.134-2.566 4.249-3.629M24.368 44.512l23.479-23.967l3.753 3.754c-.011.006-.022 0-.032.01c-.652.62-1.32 1.235-2.013 1.833a21 21 0 0 1-1.625 1.261c.088-.41.044-1.128-.538-1.171c-1.236-.097-2.32 2.518-.672 2.267c.119-.019.236-.065.354-.098c-.175.32-.38.624-.594.913c-.482.657-1.248 1.04-1.795 1.654c-.695.778-.967 1.894-1.711 2.705c-.329.358-2.124 2.652-2.762 2.382c-.079-.031-.191.012-.218.088q-.308.89-.612 1.789c-.035.105-.249.55-.459.991c.211-.97.238-2.018.131-2.513c-.038-.175-.246-.188-.345-.109c-.869.695-1.126 2.347-.658 3.602c-.261.268-.59.458-1.011.547c-.245-.135-.424.229-.178.365c.08.043.152.064.227.092c-.352.285-.754.564-1.186.844c.109-1.748.232-5.166-1.748-5.618c-.098-.022-.182.005-.228.088c-.866 1.522-2.105 4.713-.313 6.368c.211.195.489-.103.278-.298c-1.375-1.27-.557-3.647-.057-4.946c.775-2.006 1.593 1.85 1.635 2.443c.053.742.044 1.489.005 2.236c-2.484 1.556-5.655 3.23-5.898 6.357c-.054.706.105 1.256.389 1.66l-.033.037zm14.18-7.405q.367.745.109 1.446a2.7 2.7 0 0 1-.299.913c-.186-.802-.074-1.702.19-2.359M30.454 49.51c-.171-.408-.308-.924-.402-1.572a3.7 3.7 0 0 1 .987-1.898c1.185-1.47 2.841-2.441 4.41-3.444a19 19 0 0 1-.214 1.689zm3.357-.814a4.6 4.6 0 0 1-1.261 1.556c-.443.269-.827.344-1.162.256l3.111-3.398c-.2.54-.428 1.072-.688 1.586m2.054-6.369c.565-.37 1.111-.751 1.611-1.168c.062-.052.063-.114.044-.175c.32-.024.585-.226.803-.529c.018.029.029.064.05.092a.24.24 0 0 0 .18.109L35.74 43.73c.054-.483.097-.957.125-1.403" />
            </svg>
            <span>Card Payment</span>
        </div>
        <div class="method-option" [class.selected]="paymentMethod === 'Crypto'"
            (click)="selectPaymentMethod('Crypto')">
            <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 24 24">
                <g fill="#0ff" fill-rule="evenodd" clip-rule="evenodd">
                    <path
                        d="M11.357 10.288a.34.34 0 0 0-.36.32c-.139.498-.309.998-.408 1.487q-.078.32-.08.649v.669q.067.804.26 1.587a.38.38 0 0 0 .419.36a.43.43 0 0 0 .21-.11l.239.07v.07a1 1 0 0 0 0 .24a1 1 0 0 0 0 .229c.34.878.5.878.669.868c.41 0 .599-1.118.599-1.138v-.09h.559a1.68 1.68 0 0 0 1.148-.798a1.33 1.33 0 0 0-.19-1.568s-.12-.07-.17-.11q.217-.166.36-.399a1.33 1.33 0 0 0-.22-1.617a2.2 2.2 0 0 0-.918-.55c-.18 0-.36 0-.54-.06q.056-.084.09-.18a.8.8 0 0 0 .05-.219a.6.6 0 0 0 0-.22c-.21-.998-.489-.928-.509-.938c-.32 0-.738.809-.738.819a.7.7 0 0 0-.06.25q-.015.124 0 .249l.06.17h-.34a.4.4 0 0 0-.13-.04m.73.918q.425.09.828.26c.2.078.375.213.499.39v.159a.5.5 0 0 1-.25.18l-.668.2h-.64a9 9 0 0 0-.12-1.289zm-.33 2.217a1 1 0 0 1 0-.16h.14q.286.07.579.11q.22.049.429.13a1.15 1.15 0 0 1 .524.415a.11.11 0 0 1-.025.124a.48.48 0 0 1-.25.19l-.668.19a4 4 0 0 1-.59 0h-.289c.04-.29.1-.64.15-1m-6.35-8.516q.392-.133.759-.33A9.4 9.4 0 0 0 9.16 6.105c0 .22-.13.44-.14.67a.38.38 0 0 0 .31.459a.39.39 0 0 0 .449-.31q.096-.272.23-.529h.1c.7.142 1.412.208 2.126.2a12.6 12.6 0 0 0 2.106-.22c.2 0 .38-.13.58-.17c.13.22.26.44.369.67a.39.39 0 1 0 .719-.22c-.05-.23-.16-.45-.22-.69a14.3 14.3 0 0 0 2.666-1.117q.383.241.709.559c.599.539 1.158-.42.848-.79a10 10 0 0 0-1.886-1.497a14.8 14.8 0 0 0-6.11-1.547a10.7 10.7 0 0 0-6.99 2.446c-.519.38.05 1.078.38.888m12.15-.619a15 15 0 0 1-2.136.63a3 3 0 0 0-.1-.3a5.1 5.1 0 0 0-1.018-1.498a10.9 10.9 0 0 1 3.254 1.168m-6.888.79c.17-.3.359-.59.529-.9c.17-.309.489-.858.738-1.277h.6c.22.25.439.479.628.738l.35.51l.519.738l.17.25h-.1q-.955.124-1.917.13a14 14 0 0 1-1.587-.1zm-.15-2.058c-.07.08-.16.14-.23.22a6 6 0 0 0-.5.719a6.5 6.5 0 0 0-.379.799c0 .07 0 .15-.05.23a9.7 9.7 0 0 1-2.416-.86A10 10 0 0 1 10.52 3.02m4.222 19.099s.07-.05.09-.09q.204-.314.35-.66q.143-.344.229-.708v-.33q.712-.015 1.418-.12c.389-.189-.1-1.157-.56-1.117h-.718v-.16a.39.39 0 1 0-.77-.12c0 .1-.08.21-.109.31H9.98l.04-.13a.39.39 0 0 0-.47-.29a.36.36 0 0 0-.27.34a13.5 13.5 0 0 1-1.906-.15c-.36-.05-.64.859.05.998c.499.09 1.487.29 1.996.34q.025.27.08.539a3.5 3.5 0 0 0 .52 1.218q.163.224.359.42a18.4 18.4 0 0 1-4.483-2.217c-.42-.31-.998.33-.48.669a15.1 15.1 0 0 0 5.802 2.476h.05c.24 0 .479.1.728.12a.33.33 0 0 0 .38-.3a.34.34 0 0 0-.3-.38l-.539-.11c-.17-.408-.29-.818-.44-1.247c-.07-.19-.149-.38-.229-.56c-.08-.179-.17-.369-.26-.548l1.238.09h2.327c-.06.13-.11.249-.17.369s-.18.42-.27.629s-.14.45-.23.659a5 5 0 0 1-.389.769a.35.35 0 0 0 0 .489c.39.36 3.924-.68 5.172-1.797c.26-.21-.1-.79-.689-.64c-.917.49-1.872.903-2.855 1.239" />
                    <path
                        d="M23.608 18.934a2.6 2.6 0 0 0-.61-.939c-.389-.499-.738.13-.528.62q.162.312.269.648c.125.397.175.813.15 1.228a1.15 1.15 0 0 1-.55.929a1.14 1.14 0 0 1-1.048 0c-1.827-.69-4.412-3.774-5.071-4.343q.12-.081.23-.18a6 6 0 0 0 .628-.739q.285-.406.49-.858q.285-.627.439-1.298a7 7 0 0 0 .13-1.368a4.7 4.7 0 0 0-.13-1.148a9 9 0 0 0-.37-.999c-.09-.18-.2-.34-.3-.509c.29-.24.55-.509.82-.749c0 0 3.993-3.863 4.313-4.243c.374-.472.67-1.001.878-1.567a1.82 1.82 0 0 0-.24-1.678a1.6 1.6 0 0 0-1.597-.569a5.2 5.2 0 0 0-1.567.63q-.7.361-1.318.848c-.33.19-.1.769.619.51a7.4 7.4 0 0 1 1.128-.54c.41-.192.848-.316 1.298-.37a.48.48 0 0 1 .459.2a.61.61 0 0 1 0 .53c-.174.43-.41.834-.699 1.198c-.25.32-3.914 4.383-3.914 4.383c-.22.23-.429.479-.648.718a5.32 5.32 0 0 0-6.45-1.507c-.658.289-1.25.71-1.737 1.238a12.7 12.7 0 0 1-2.656-2.217a9.6 9.6 0 0 1-1.757-2.336c-.12-.22-.24-.44-.38-.639L3.43 2.82l-.16-.59a1.2 1.2 0 0 1 0-.379v-.08a.6.6 0 0 1 .4 0a6 6 0 0 1 1.667.68l.48.309c.429.28.998-.24.618-.56l-.629-.498A5.8 5.8 0 0 0 3.4.543a1.25 1.25 0 0 0-.998.38a1.8 1.8 0 0 0-.37 1.358l.19.898l.51 1.268c.209.36 2.106 2.796 2.455 3.125A13 13 0 0 0 8.182 9.66a7 7 0 0 0-.718 1.268a5.7 5.7 0 0 0-.36 1.198c-.07.423-.07.855 0 1.278a.34.34 0 0 0 .38.3a.35.35 0 0 0 .31-.38a3.1 3.1 0 0 1 .079-1.049q.13-.516.36-.998A6 6 0 0 1 9.29 9.71a4.5 4.5 0 0 1 1.497-.999a4.373 4.373 0 0 1 5.591 2.297q.174.415.3.848c.073.27.113.549.12.829a5.6 5.6 0 0 1-.41 2.156q-.144.345-.35.66a4.6 4.6 0 0 1-.468.598a3 3 0 0 1-.55.47q-.315.208-.659.369a4.7 4.7 0 0 1-3.773.06a4.6 4.6 0 0 1-2.566-2.835a.393.393 0 0 0-.75.24a5.4 5.4 0 0 0 1.16 2.086c-.4.31-.82.599-1.249.878L2.64 20.362c-.242.175-.517.3-.808.37c-.19.05-.34.07-.42 0a1.12 1.12 0 0 1-.2-.739c.048-.63.21-1.246.48-1.817q.196-.474.5-.889c.329-.339-.17-.808-.49-.669a5.2 5.2 0 0 0-.819 1.139a6.4 6.4 0 0 0-.848 2.096a2.2 2.2 0 0 0 .3 1.568a1.54 1.54 0 0 0 1.696.569c.354-.069.692-.2.999-.39c.499-.289 2.346-1.887 4.622-3.514q.663-.473 1.268-1.018v-.05a5.6 5.6 0 0 0 1.248.829a5.76 5.76 0 0 0 4.623.12q.408-.175.789-.4c.429.45 1.647 1.897 3.234 3.764a5.3 5.3 0 0 0 1.917 1.278a2.36 2.36 0 0 0 2.267-.12a2.27 2.27 0 0 0 .998-1.997a4.4 4.4 0 0 0-.39-1.557" />
                    <path
                        d="M22.45 16.997a12.4 12.4 0 0 0 .339-8.476a6.2 6.2 0 0 0-.998-1.997c-.55-.32-1.109.24-.84.858c.325.45.569.954.72 1.488c.357 1.053.556 2.153.589 3.265h-1.488a4 4 0 0 0-.479.1c-.4.09-.749.24-1.148.339a.35.35 0 0 0 0 .689q.62.168 1.258.22q.27.03.539 0q.27-.038.53-.12c.259-.09.508-.21.748-.32a9.6 9.6 0 0 1-1.198 4.473a9 9 0 0 1-.759 1.048q-.392.386-.689.849c-.2.33.52.55.64.46a10 10 0 0 0 2.236-2.876m-19.19-.709a15 15 0 0 1-.629-1.997c-.12-.499-.2-.998-.27-1.507q.232.144.48.26c.381.146.781.237 1.188.269q.716.02 1.428-.05a.391.391 0 0 0 .07-.779c-.44-.11-.859-.26-1.298-.39l-.53-.09a5 5 0 0 0-.558-.089c-.3 0-.58 0-.859-.07a8.2 8.2 0 0 1 1.677-4.992c.18-.4-.429-.998-.788-.709a8.9 8.9 0 0 0-1.997 6.29c.1.73.3 1.438.45 2.157a8.43 8.43 0 0 0 2.116 4.213c.609.4.868-.13.699-.48a10 10 0 0 1-1.179-2.036" />
                </g>
            </svg>
            <span>Crypto Payment</span>
        </div>
    </div>

    @if (paymentMethod === 'Card') {
    <!-- <form #cardForm="ngForm" class="card-payment-form">
        <h3 class="form-header">CARD DETAILS</h3>
        <div class="form-group-inline">

            <div class="form-group">
                <label for="cardNumber">Card Number</label>
                <input type="text" id="cardNumber" name="cardNumber" [(ngModel)]="cardDetails.number"
                    pattern="\d{4}\s?\d{4}\s?\d{4}\s?\d{4}" required placeholder="0000 0000 0000 0000">
            </div>
            <div class="form-group">
                <label for="cardHolder">Card Holder Name</label>
                <input type="text" id="cardHolder" name="cardHolder" [(ngModel)]="cardDetails.holder" required
                    placeholder="John Doe">
            </div>
        </div>
        <div class="form-group-inline">
            <div class="form-group">
                <label for="expiry">Expiry (MM/YY)</label>
                <input type="text" id="expiry" name="expiry" [(ngModel)]="cardDetails.expiry" pattern="\d{2}/\d{2}"
                    required placeholder="MM/YY">
            </div>
            <div class="form-group">
                <label for="cvv">CVV</label>
                <input type="text" id="cvv" name="cvv" [(ngModel)]="cardDetails.cvv" pattern="\d{3,4}" required
                    placeholder="123">
            </div>
        </div>

    </form> -->
    <app-credit-card></app-credit-card>
    }

    @if (paymentMethod === 'Crypto') {
    <div class="crypto">
        @for (crypto of cryptoOptions; track crypto.key) {
        <div class="crypto-option">
            <svg viewBox="0 0 24 24" fill="currentColor" [attr.data-key]="crypto.key">
                <path [attr.d]="crypto.icon"></path>
            </svg>
            <span>{{ crypto.name }}</span>
        </div>
        }
    </div>
    }

    <div class="modal-actions">
        @if (orderStatus === 'success') {
        <div class="status-message success">
            ORDER PLACED! Your access key will be encrypted and sent. (ID: {{ orderId }})
        </div>
        } @else if (orderStatus === 'error') {
        <div class="status-message error">
            TRANSACTION FAILED: Cannot connect to secure ledger. Please try again.
        </div>
        } @else {
        <button class="neon-button green" (click)="placeOrder()"
            [disabled]="!selectedProduct || isPlacingOrder || !isPaymentValid()">
            @if (isPlacingOrder) {
            PROCESSING...
            } @else {
            EXECUTE ORDER (${{ selectedProduct?.price | number:'1.2-2' }})
            }
        </button>
        }
    </div>

</div>