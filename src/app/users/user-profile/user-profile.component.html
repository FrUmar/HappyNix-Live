<!-- <div class="main"> -->
<!-- <div class="matrix-background"></div> -->
<div class="profile-container mb-4">
    <button class="neon-button back-button" (click)="goBack()" data-text="Back to Dashboard">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <path d="M19 12H5M12 19l-7-7 7-7" />
        </svg>
        Go Back
    </button>
    <header class="profile-header">
        <div class="avatar-container">
            <img [src]="user.avatarUrl" [alt]="user.name" class="avatar">
            <button class="edit-avatar-btn">⚙️</button>
        </div>
        <div class="user-info">
            <h1 class="glitch" [attr.data-text]="user.name">{{ user.name }}</h1>
            <p class="user-email">{{ user.email }}</p>
            <p class="join-date">Joined: {{ user.createdAt | date: 'fullDate' }}</p>
        </div>
    </header>

    <nav class="profile-tabs">
        <button class="tab-button" [class.active]="activeTab === 'profile'" (click)="setActiveTab('profile')">
            Profile Details
        </button>
        <button class="tab-button" [class.active]="activeTab === 'orders'"
            (click)="setActiveTab('orders');getUserOrdersHistory()">
            Order History
        </button>
    </nav>

    <main class="tab-content">
        <!-- Profile Details Tab -->
        <section *ngIf="activeTab === 'profile'" class="profile-details">
            <form (ngSubmit)="updateProfile()">
                <div class="input-group">
                    <input type="text" id="username" name="username" [(ngModel)]="user.name" required>
                    <label for="username">Username / Handle</label>
                </div>
                <div class="input-group">
                    <input type="email" disabled id="email" name="email" [(ngModel)]="user.email" required>
                    <label for="email">Email</label>
                </div>
                <!-- <div class="input-group">
                    <textarea id="bio" name="bio" rows="4" [(ngModel)]="user.bio" required></textarea>
                    <label for="bio">Bio</label>
                </div> -->
                <!-- phone number -->
                <div class="input-group">
                    <input type="tel" id="phone" name="phone" [(ngModel)]="user.phoneNumber" required>
                    <label for="phone">Phone Number</label>
                </div>

                <button type="submit" class="neon-button green">Save Changes&nbsp;<i class="fa fa-refresh fa-spin"
                        style="font-size: 15px" *ngIf="isUpdating">
                    </i>
                </button>
            </form>
        </section>

        <!-- Order History Tab -->
        <section *ngIf="activeTab === 'orders'" class="order-history">
            <h2>Your Orders</h2>
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>Order ID</th>
                            <th>Date</th>
                            <th>Item</th>
                            <th>Price</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody *ngIf="!orderLoading">
                        <tr *ngFor="let order of orders">
                            <td data-label="Order ID">{{ order.id.slice(0,6)}}</td>
                            <td data-label="Date">{{ order.createdAt }}</td>
                            <td data-label="Item">{{ order.productName }}</td>
                            <td data-label="Price">$ {{ order.amount }}</td>
                            <td data-label="Status">
                                <div class="status" [ngClass]="order.statusName.toLowerCase()">{{ order.statusName
                                    }}</div>
                            </td>
                        </tr>
                    </tbody>
                    <tbody *ngIf="orderLoading">
                        <tr *ngFor="let i of [1, 2, 3, ]">
                            <td>
                                <div class="skeleton-loader"></div>
                            </td>
                            <td>
                                <div class="skeleton-loader"></div>
                            </td>
                            <td>
                                <div class="skeleton-loader"></div>
                            </td>
                            <td>
                                <div class="skeleton-loader"></div>
                            </td>
                            <td>
                                <div class="skeleton-loader"></div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div *ngIf="orders.length === 0" class="no-orders">
                <p>No orders found. Time to acquire some new assets.</p>
            </div>
        </section>
    </main>
</div>
<!-- </div> -->